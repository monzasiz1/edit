<h2 class="headline">Dashboard</h2>

<!-- Desktop Tabelle -->
<div class="only-desktop">
  <table class="responsive-table penalties-table">
    <thead>
      <tr>
        <th>Datum</th>
        <th>Event</th>
        <th>Grund</th>
        <th>Betrag (€)</th>
      </tr>
    </thead>
    <tbody>
      <% penalties.forEach(p => { %>
        <tr>
          <td>
            <%= p.date
              ? (typeof p.date === 'string'
                  ? new Date(p.date).toLocaleDateString('de-DE')
                  : p.date.toLocaleDateString('de-DE'))
              : '' %>
          </td>
          <td><%= p.event %></td>
          <td><%= p.type %></td>
          <td style="text-align:right;"><%= Number(p.amount).toFixed(2) %></td>
        </tr>
        
      <% }) %>

      
    </tbody>
    
  </table>
</div>

<!-- Mobile Kartenansicht -->
<div class="only-mobile dashboard-cards">
  <% penalties.forEach((p, index) => { %>
    <div class="dashboard-card <%= index === 0 ? 'latest' : '' %>">
      <% if (p.admin) { %>
        <div class="admin-tag-mobile">von <%= p.admin %></div>
      <% } %>
      <div style="font-size: 1.5em; margin-bottom: 0.12em;">
        <%= p.type === "Unpünktlichkeit" ? "⏰" : p.type === "Uniform vergessen" ? "👕" : "⚡" %>
      </div>
      <div class="dashboard-row">
        <span class="dashboard-label">📅 Datum</span>
        <span class="dashboard-value"><%= new Date(p.date).toLocaleDateString('de-DE') %></span>
      </div>
      <div class="dashboard-row">
        <span class="dashboard-label">🎉 Event</span>
        <span class="dashboard-value"><%= p.event %></span>
      </div>
      <div class="dashboard-row">
        <span class="dashboard-label">🎯 Grund</span>
        <span class="dashboard-value"><%= p.type %></span>
      </div>
      <div class="dashboard-row amount">
        <span class="dashboard-label">💶 Betrag</span>
        <span class="dashboard-value"><%= Number(p.amount).toFixed(2) %> €</span>
      </div>
    </div>
  <% }) %>

   <% 
    let totalAmount = 0; 
    penalties.forEach(p => { totalAmount += parseFloat(p.amount) || 0; });
  %>
  <div class="dashboard-total">
    <strong>Gesamtstrafe:</strong> <%= totalAmount.toFixed(2) %> €
  </div>
</div>
