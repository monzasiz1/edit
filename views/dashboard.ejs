<h2>Dashboard</h2>

<% if (user.is_admin && users) { %>
  <section>
    <h3>Alle Nutzer</h3>
    <table>
      <thead>
        <tr>
          <th>Benutzername</th>
          <th>Rolle</th>
          <th>Aktionen</th>
        </tr>
      </thead>
      <tbody>
        <% users.forEach(u => { %>
          <tr>
            <td data-label="Benutzername"><strong><%= u.username %></strong></td>
            <td data-label="Rolle"><%= u.is_admin ? "Admin" : "Mitglied" %></td>
            <td data-label="Aktionen">
              <a href="/users/edit/<%= u.id %>" class="btn btn-small">Bearbeiten</a>
              <form action="/users/delete/<%= u.id %>" method="POST" style="display:inline">
                <button class="btn btn-small btn-cancel" onclick="return confirm('Wirklich lÃ¶schen?')">LÃ¶schen</button>
              </form>
              <a href="/export/user/<%= u.id %>" class="btn btn-small">PDF</a>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </section>
<% } else if (penalties) { %>
  <section>
    <h3>Meine Strafen</h3>
    <% if (penalties.length === 0) { %>
      <p>Keine Strafen vorhanden! ðŸŽ‰</p>
    <% } else { %>
      <table>
        <thead>
          <tr>
            <th>Datum</th>
            <th>Veranstaltung</th>
            <th>Grund</th>
            <th>Betrag (â‚¬)</th>
          </tr>
        </thead>
        <tbody>
          <% let total = 0; %>
          <% penalties.forEach(p => { %>
            <tr>
              <td data-label="Datum"><%= new Date(p.date).toLocaleDateString('de-DE') %></td>
              <td data-label="Veranstaltung"><%= p.event %></td>
              <td data-label="Grund"><%= p.type %></td>
              <td data-label="Betrag (â‚¬)"><%= Number(p.amount).toFixed(2) %></td>
              <% total += Number(p.amount); %>
            </tr>
          <% }) %>
        </tbody>
      </table>
      <p class="dashboard-total">
        Gesamtbetrag: <%= total.toFixed(2) %> â‚¬
      </p>
    <% } %>
  </section>
<% } %>
