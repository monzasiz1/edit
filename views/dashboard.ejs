<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title><%= typeof title !== 'undefined' ? title : 'Dashboard' %></title>
  <link rel="stylesheet" href="/style.css" />
</head>
<body>
  

  <main class="container">
    <h2>Dashboard</h2>

    <% if (user.is_admin && users) { %>
      <section>
        <h3>Alle Nutzer</h3>
        <ul>
          <% users.forEach(u => { %>
            <li>
              <strong><%= u.username %></strong> <% if (u.is_admin) { %> (Admin) <% } %>
              | <a href="/users/edit/<%= u.id %>">Bearbeiten</a>
              | <form action="/users/delete/<%= u.id %>" method="POST" style="display:inline">
                  <button class="btn btn-small btn-danger" onclick="return confirm('Wirklich lÃ¶schen?')">LÃ¶schen</button>
                </form>
              | <a href="/export/user/<%= u.id %>">PDF</a>
            </li>
          <% }) %>
        </ul>
      </section>
    <% } else if (penalties) { %>
      <section>
        <h3>Meine Strafen</h3>
        <% if (penalties.length === 0) { %>
          <p>Keine Strafen vorhanden! ðŸŽ‰</p>
        <% } else { %>
          <ul>
            <% penalties.forEach(p => { %>
              <li><%= new Date(p.date).toLocaleDateString('de-DE') %>: <%= p.reason %></li>
            <% }) %>
          </ul>
        <% } %>
      </section>
    <% } %>
  </main>
</body>
</html>
