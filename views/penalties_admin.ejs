
<h2 class="headline">Alle Strafen (Tabellenansicht)</h2>
<a href="/penalties/add" class="btn btn-add">â• Neue Strafe vergeben</a>

<div class="only-desktop">
  <table class="responsive-table penalties-table">
    <thead>
      <tr>
        <th>ğŸ‘¤ Nutzer</th>
        <th>ğŸ“† Datum</th>
        <th>ğŸ¯ Grund</th>
        <th>ğŸ‰ Veranstaltung</th>
        <th>ğŸ’¶ Betrag</th>
        <th>âš™ï¸ Aktion</th>
      </tr>
    </thead>
    <tbody>
      <% let sum = 0; %>
      <% penalties.forEach(p => { sum += parseFloat(p.amount) || 0; %>
        <tr>
          <td data-label="Nutzer"><%= p.username %></td>
          <td data-label="Datum"><%= p.date ? (p.date.toISOString ? p.date.toISOString().slice(0,10) : p.date) : '' %></td>
          <td data-label="Grund"><%= p.type %></td>
          <td data-label="Veranstaltung"><%= p.event %></td>
          <td data-label="Betrag" style="text-align:right;"><%= Number(p.amount).toFixed(2) %> â‚¬</td>
          <td data-label="Aktion">
            <a href="/penalties/edit/<%= p.id %>" class="btn btn-small">âœï¸ Bearbeiten</a>
            <form action="/penalties/delete/<%= p.id %>" method="POST" style="display:inline">
              <button class="btn btn-small btn-delete" onclick="return confirm('Wirklich lÃ¶schen?')">ğŸ—‘ï¸ LÃ¶schen</button>
            </form>
          </td>
        </tr>
      <% }) %>
      <tr class="sum-row">
        <td colspan="4" style="text-align:right; font-weight:bold;">Summe</td>
        <td style="text-align:right; font-weight:bold;"><%= sum.toFixed(2) %> â‚¬</td>
        <td></td>
      </tr>
    </tbody>
  </table>
</div>

<div class="penalty-cards only-mobile">
  <% let mobileSum = 0; %>
  <% penalties.forEach(p => { mobileSum += parseFloat(p.amount) || 0; %>
    <div class="penalty-card">
      <div class="penalty-row"><span class="penalty-label">ğŸ‘¤ Nutzer</span><span><%= p.username %></span></div>
      <div class="penalty-row"><span class="penalty-label">ğŸ“† Datum</span><span><%= p.date ? (p.date.toISOString ? p.date.toISOString().slice(0,10) : p.date) : '' %></span></div>
      <div class="penalty-row"><span class="penalty-label">ğŸ¯ Grund</span><span><%= p.type %></span></div>
      <div class="penalty-row"><span class="penalty-label">ğŸ‰ Veranstaltung</span><span><%= p.event %></span></div>
      <div class="penalty-row"><span class="penalty-label">ğŸ’¶ Betrag</span><span><%= Number(p.amount).toFixed(2) %> â‚¬</span></div>
      <div class="penalty-actions">
        <a href="/penalties/edit/<%= p.id %>" class="btn btn-small">âœï¸ Bearbeiten</a>
        <form action="/penalties/delete/<%= p.id %>" method="POST" style="display:inline">
          <button class="btn btn-small btn-delete" onclick="return confirm('Wirklich lÃ¶schen?')">ğŸ—‘ï¸ LÃ¶schen</button>
        </form>
      </div>
    </div>
  <% }) %>
  <div class="penalty-card sum-row" style="background:#e4e7dc;">
    <div class="penalty-row" style="font-weight:bold;justify-content:space-between;">
      <span>Gesamtsumme</span>
      <span><%= mobileSum.toFixed(2) %> â‚¬</span>
    </div>
  </div>
</div>
